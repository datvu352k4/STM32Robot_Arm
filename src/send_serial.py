import serial
import time

# Cấu hình cổng Serial
ser = serial.Serial('COM8', 115200, timeout=1)
time.sleep(2)  # Chờ Serial ổn định

# Danh sách góc cần gửi
angles = [
"2.36,74.76,102.37",
"4.68,72.45,104.69",
"6.47,70.66,106.48",
"7.90,69.23,107.91",
"9.09,68.04,109.10",
"10.18,66.95,110.19",
"11.22,65.91,111.23",
"12.24,64.89,112.25",
"13.22,63.91,113.23",
"14.24,62.89,114.25",
"1.49,73.53,101.14",
"4.20,71.83,103.84",
"6.06,69.97,105.71",
"7.61,68.42,107.26",
"8.86,67.17,108.51",
"9.98,66.05,109.63",
"11.02,65.01,110.67",
"12.04,64.00,111.68",
"13.04,62.99,112.69",
"14.03,61.99,113.68",
"0.67,72.68,100.32",
"3.77,71.58,103.42",
"5.69,69.66,105.34",
"7.33,68.02,107.00",
"8.62,66.73,108.29",
"9.76,65.59,109.43",
"10.81,64.54,110.48",
"11.83,63.52,111.50",
"12.83,62.52,112.50",
"13.81,61.54,113.48",
"0.33,71.62,99.98",
"3.29,70.66,102.94",
"5.32,68.63,104.97",
"7.05,66.90,106.70",
"8.39,65.56,108.04",
"9.54,64.41,109.19",
"10.61,63.34,110.26",
"11.64,62.31,111.29",
"12.66,61.29,112.31",
"13.64,60.31,113.29",
"1.62,70.66,99.27",
"2.77,69.51,100.42",
"4.97,67.31,102.62",
"6.74,65.54,104.39",
"8.13,64.15,105.78",
"9.30,62.98,106.95",
"10.39,61.89,108.04",
"11.42,60.86,109.07",
"12.45,59.83,110.10",
"13.44,58.84,111.09",
"14.43,57.85,112.08",
"2.17,74.21,101.82",
"4.60,71.78,104.25",
"6.42,69.96,106.07",
"7.88,68.50,107.53",
"9.09,67.29,108.74",
"10.18,66.20,109.83",
"11.22,65.16,110.87",
"12.23,64.15,111.88",
"13.22,63.16,112.87",
"14.22,62.16,113.87",
"1.49,73.53,101.14",
"4.20,71.83,103.84",
"6.06,69.97,105.71",
"7.61,68.42,107.26",
"8.86,67.17,108.51",
"9.98,66.05,109.63",
"11.02,65.01,110.67",
"12.04,64.00,111.68",
"13.04,62.99,112.69",
"14.03,61.99,113.68",
"0.67,72.68,100.32",
"3.77,71.58,103.42",
"5.69,69.66,105.34",
"7.33,68.02,107.00",
"8.62,66.73,108.29",
"9.76,65.59,109.43",
"10.81,64.54,110.48",
"11.83,63.52,111.50",
"12.83,62.52,112.50",
"13.81,61.54,113.48",
"0.33,71.62,99.98",
"3.29,70.66,102.94",
"5.32,68.63,104.97",
"7.05,66.90,106.70",
"8.39,65.56,108.04",
"9.54,64.41,109.19",
"10.61,63.34,110.26",
"11.64,62.31,111.29",
"12.66,61.29,112.31",
"13.64,60.31,113.29",
"1.62,70.66,99.27",
"2.77,69.51,100.42",
"4.97,67.31,102.62",
"6.74,65.54,104.39",
"8.13,64.15,105.78",
"9.30,62.98,106.95",
"10.39,61.89,108.04",
"11.42,60.86,109.07"
]
# Gửi từng chuỗi một
for angle in angles:
    ser.write((angle + '\n').encode())  # Gửi chuỗi góc qua Serial
    print(f"Đã gửi: {angle}")
    time.sleep(0.25)  # Chờ một chút để STM32 nhận lệnh

ser.close()
print("Hoàn thành gửi toàn bộ chuỗi góc!")
